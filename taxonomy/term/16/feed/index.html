<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xml:base="http://theoleschool.com"  xmlns:dc="http://purl.org/dc/elements/1.1/">
<channel>
 <title>theoleschool - coffeescript</title>
 <link>http://theoleschool.com/tags/coffeescript</link>
 <description></description>
 <language>en</language>
<item>
 <title>Hubot Drush me Drupal</title>
 <link>http://theoleschool.com/blog/hubot-drush-me-drupal</link>
 <description>&lt;div class=&quot;field field-name-body field-type-text-with-summary field-label-hidden&quot;&gt;&lt;div class=&quot;field-items&quot;&gt;&lt;div class=&quot;field-item even&quot; property=&quot;content:encoded&quot;&gt;&lt;p&gt;Recently the company I work for shifted the bulk of our instant message communications over to &lt;a href=&quot;http://campfirenow.com/&quot;&gt;Campfire&lt;/a&gt;, and established a series of rooms to discuss our various projects.  This transition seemed to go fairly well, once everyone settled on their preferred client interface.  I was used to using IRC and found a &lt;a href=&quot;https://github.com/zerowidth/camper_van&quot;&gt;nice little Ruby gem&lt;/a&gt; that piped Campfire through my IRC client.  Chatting in this environment quickly had me missing Druplicon, the friendly Drupal fueled chat bot that tirelessly serves the Drupal IRC community.  I decided to look for a replacement, and after some searching I stumbled upon &lt;a href=&quot;http://hubot.github.com/&quot;&gt;Hubot&lt;/a&gt;, a Node.js powered chat bot. It was initially built by the folks at GitHub and includes a long list of &lt;a href=&quot;http://hubot-script-catalog.herokuapp.com/&quot;&gt;plugin scripts&lt;/a&gt; added by community developers.  This was immediately appealing for several reasons:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;It is built using Node.js&lt;/li&gt;
&lt;li&gt;It is written in Coffeescript (something I have wanted to try my hand at for a while)&lt;/li&gt;
&lt;li&gt;Additional scripts appeared easy to write, and plugin simply&lt;/li&gt;
&lt;li&gt;It has built in Campfire integration&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;So I installed Hubot on a small server, with a handful of scripts that I thought would be useful and fun for our team.  Adding the bot to our Campfire rooms was fairly painless, and after writing a small init script we were good to go.  This sparked some discussion among our team about how the bot was deployed, cool ways it could be extended, and methods of use.  A fellow developer, &lt;a href=&quot;http://davidfells.net/&quot;&gt;David Fells&lt;/a&gt;, mentioned that it would be handy if we could tell Hubot to execute &lt;a href=&quot;http://drupal.org/project/drush&quot;&gt;Drush&lt;/a&gt; commands.  This gave me pause, and after a quick:&lt;/p&gt;

&lt;p&gt;&quot;That&#039;s a great idea! You mind if I implement that?&quot;&lt;br /&gt;
&quot;Sure, go for it.&quot;&lt;/p&gt;

&lt;p&gt;I found myself firing up my editor, trying a few test methods, and reading up on &lt;a href=&quot;http://coffeescript.org/&quot;&gt;CoffeeScript&lt;/a&gt;. Things moved fairly quickly, once I got going.  I realized &lt;a href=&quot;http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options&quot;&gt;&lt;code&gt;child_process.spawn()&lt;/code&gt;&lt;/a&gt;was going to be my friend, a core Node method that I had yet to use.  Generally CoffeeScript proved to be the biggest challenge.  While writing the initial prototype I actually used a &lt;a href=&quot;http://js2coffee.org/&quot;&gt;JavaScript to CoffeScript translator&lt;/a&gt; and was cursing the whole time.  However, by the time I was putting the finishing touches on my methods and objects I found myself smiling as I wrote in this almost comical syntax.  Simply put, CoffeeScript is fun! I still find myself favoring the comforting structure of the curly braces and semicolons when working with JavaScript, but now that all seems  somewhat gray and drab, knowing there is something much more playful out there.&lt;/p&gt;

&lt;p&gt;As you can imagine there were, and are, several security concerns.  The early prototype actually had user commands pipe right into Drush which is a security nightmare.  Any user with access to the bot could escape or pipe in any old Bash command directly through the bot.  Further, any Drupal installation that Drush is aware of would be at the mercy of users who may or may not have the best intentions at heart. Needless to say this approach was quickly abandoned in favor of a hand picked list of commands made available to the bot.  This caused the code to be a bit more tedious, and likely less elegant, but I needed to insure that Drush would be executing the allowed commands, and nothing more.  After some discussion I also decided to weed the available commands down to a relatively innocuous set (giving information vs. actually changing something).  I attempted to structure the code in a way that it would not be difficult for another developer to add commands. Overall, I&#039;m pretty happy with the &lt;a href=&quot;https://github.com/github/hubot-scripts/blob/master/src/scripts/drush.coffee&quot;&gt;end result&lt;/a&gt;, and the pull request was soon accepted.  You can find this script along with all of the other &lt;a href=&quot;http://hubot-script-catalog.herokuapp.com/#drush.coffee&quot;&gt;Hubot scripts on GitHub&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;strong&gt;tl;dr&lt;/strong&gt; If you&#039;re looking for a fun chatbot for campfire (or otherwise) check out &lt;a href=&quot;http://hubot.github.com/&quot;&gt;Hubot&lt;/a&gt; and enable &lt;a href=&quot;http://hubot-script-catalog.herokuapp.com/#drush.coffee&quot;&gt;drush.coffee&lt;/a&gt; if you&#039;d like that bot to have cool Drush functionality.&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description>
 <pubDate>Wed, 08 May 2013 04:15:48 +0000</pubDate>
 <dc:creator>rho</dc:creator>
 <guid isPermaLink="false">163 at http://theoleschool.com</guid>
</item>
</channel>
</rss>
