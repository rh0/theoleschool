<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xml:base="http://theoleschool.com"  xmlns:dc="http://purl.org/dc/elements/1.1/">
<channel>
 <title>theoleschool - views</title>
 <link>http://theoleschool.com/tags/views</link>
 <description></description>
 <language>en</language>
<item>
 <title>Using hook_views_alter to Add a GROUP BY Statement</title>
 <link>http://theoleschool.com/blog/using-hookviewsalter-add-group-statement</link>
 <description>&lt;div class=&quot;field field-name-body field-type-text-with-summary field-label-hidden&quot;&gt;&lt;div class=&quot;field-items&quot;&gt;&lt;div class=&quot;field-item even&quot; property=&quot;content:encoded&quot;&gt;&lt;p&gt;&lt;em&gt;I should note this post deals with Views 2.x on Drupal 6.x&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;When Views doesn&#039;t quite spit out the query we are looking for we can turn to &lt;span class=&quot;geshifilter&quot;&gt;&lt;code class=&quot;php geshifilter-php&quot;&gt;hook_views_query_alter&lt;span style=&quot;color: #009900;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #339933;&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #000088;&quot;&gt;$view&lt;/span&gt;&lt;span style=&quot;color: #339933;&quot;&gt;,&lt;/span&gt; &lt;span style=&quot;color: #339933;&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #000088;&quot;&gt;$query&lt;/span&gt;&lt;span style=&quot;color: #009900;&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/span&gt; to nudge it in the right direction.  This is by no means news, and there are many a blog post detailing various ways to alter the query using this function.  However, recently, I ran into an odd issue when attempting to add a &lt;span class=&quot;geshifilter&quot;&gt;&lt;code class=&quot;sql geshifilter-sql&quot;&gt;&lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;GROUP&lt;/span&gt; &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;BY&lt;/span&gt;&lt;/code&gt;&lt;/span&gt; statement.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;http://drupal.org/node/385158&quot;&gt;issue&lt;/a&gt; can be observed when attempting to use the &lt;a href=&quot;http://views.doc.logrus.com/classviews__query.html#089b7eab81ec9cb4b24aa489ff4ac448&quot;&gt;&lt;span class=&quot;geshifilter&quot;&gt;&lt;code class=&quot;php geshifilter-php&quot;&gt;add_groupby&lt;/code&gt;&lt;/span&gt;  function&lt;/a&gt; to a field in the query.  As an example, say we have a node view with a few fields (node id, node title, and user id).  This will give a simple query:&lt;/p&gt;
&lt;div class=&quot;geshifilter&quot;&gt;&lt;div class=&quot;sql geshifilter-sql&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;SELECT&lt;/span&gt; node&lt;span style=&quot;color: #66cc66;&quot;&gt;.&lt;/span&gt;nid &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;AS&lt;/span&gt; nid&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; &lt;br /&gt;
       node&lt;span style=&quot;color: #66cc66;&quot;&gt;.&lt;/span&gt;title &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;AS&lt;/span&gt; node_title&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; &lt;br /&gt;
       users&lt;span style=&quot;color: #66cc66;&quot;&gt;.&lt;/span&gt;uid &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;AS&lt;/span&gt; users_uid &lt;br /&gt;&lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;FROM&lt;/span&gt; node node  &lt;br /&gt;&lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;INNER&lt;/span&gt; &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;JOIN&lt;/span&gt; users users &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;ON&lt;/span&gt; node&lt;span style=&quot;color: #66cc66;&quot;&gt;.&lt;/span&gt;uid &lt;span style=&quot;color: #66cc66;&quot;&gt;=&lt;/span&gt; users&lt;span style=&quot;color: #66cc66;&quot;&gt;.&lt;/span&gt;uid&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now, say we want to do something silly and get this query to group by user id.  A node view does not allow for this, so we turn to &lt;span class=&quot;geshifilter&quot;&gt;&lt;code class=&quot;php geshifilter-php&quot;&gt;hook_views_query_alter&lt;/code&gt;&lt;/span&gt;.&lt;/p&gt;
&lt;div class=&quot;geshifilter&quot;&gt;&lt;div class=&quot;drupal6 geshifilter-drupal6&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;span style=&quot;color: #000000; font-weight: bold;&quot;&gt;function&lt;/span&gt; my_module_views_query_alter&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$view&lt;/span&gt;, &lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$query&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color: #66cc66;&quot;&gt;{&lt;/span&gt;&lt;br /&gt;
  &lt;span style=&quot;color: #b1b100;&quot;&gt;switch&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$view&lt;/span&gt;-&lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #006600;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color: #66cc66;&quot;&gt;{&lt;/span&gt;&lt;br /&gt;
    &lt;span style=&quot;color: #b1b100;&quot;&gt;case&lt;/span&gt; &lt;span style=&quot;color: #ff0000;&quot;&gt;&#039;my_view_name&#039;&lt;/span&gt;:&lt;br /&gt;
      &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;//add the group by  on the user id field &lt;/span&gt;&lt;br /&gt;
      &lt;span style=&quot;color: #0000ff;&quot;&gt;$query&lt;/span&gt;-&lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #006600;&quot;&gt;add_groupby&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&#039;users_uid&#039;&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt;;&lt;br /&gt;
      &lt;span style=&quot;color: #b1b100;&quot;&gt;break&lt;/span&gt;;&lt;br /&gt;
  &lt;span style=&quot;color: #66cc66;&quot;&gt;}&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We expect to see a nice &lt;span class=&quot;geshifilter&quot;&gt;&lt;code class=&quot;sql geshifilter-sql&quot;&gt;&lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;GROUP&lt;/span&gt; &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;BY&lt;/span&gt; users_uid&lt;/code&gt;&lt;/span&gt; tacked on to the end of our query, but instead there is a disturbing  &lt;span class=&quot;geshifilter&quot;&gt;&lt;code class=&quot;sql geshifilter-sql&quot;&gt;&lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;GROUP&lt;/span&gt; &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;BY&lt;/span&gt; nid&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; node_title&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; users_uid&lt;/code&gt;&lt;/span&gt;.  What gives?  Merlinofchaos &lt;a href=&quot;http://drupal.org/node/385158#comment-1296924&quot;&gt;clarifies&lt;/a&gt; for us:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&quot;When using GROUP BY items that appear in the SELECT must either use aggregate functions OR appear in the GROUP BY. This is enforced by postgres, therefore Views must enforce this.&quot;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;It is good that Views is looking out for the rules of postgres; it&#039;s what helps make it the powerful and flexible tool it is.  In this application though, I am not worried about postgres and simply want to alter a single Views query on an sql database.  I know that I can pass an &#039;aggregate&#039; flag to the fields in the query object to denote that they use an aggregate function, even if they do not.  Worth a try...&lt;/p&gt;
&lt;div class=&quot;geshifilter&quot;&gt;&lt;div class=&quot;drupal6 geshifilter-drupal6&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;span style=&quot;color: #000000; font-weight: bold;&quot;&gt;function&lt;/span&gt; dsic_judging_views_query_alter&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$view&lt;/span&gt;, &lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$query&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color: #66cc66;&quot;&gt;{&lt;/span&gt;&lt;br /&gt;
  &lt;span style=&quot;color: #b1b100;&quot;&gt;switch&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$view&lt;/span&gt;-&lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #006600;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color: #66cc66;&quot;&gt;{&lt;/span&gt;&lt;br /&gt;
    &lt;span style=&quot;color: #b1b100;&quot;&gt;case&lt;/span&gt; &lt;span style=&quot;color: #ff0000;&quot;&gt;&#039;dsic_judge_incomplete&#039;&lt;/span&gt;:&lt;br /&gt;
      &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;//loop through the fields and add the aggregate indicator&lt;/span&gt;&lt;br /&gt;
      &lt;span style=&quot;color: #b1b100;&quot;&gt;foreach&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$query&lt;/span&gt;-&lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #006600;&quot;&gt;fields&lt;/span&gt; &lt;span style=&quot;color: #b1b100;&quot;&gt;as&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;$key&lt;/span&gt; =&lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;$field&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color: #66cc66;&quot;&gt;{&lt;/span&gt;&lt;br /&gt;
        &lt;span style=&quot;color: #0000ff;&quot;&gt;$query&lt;/span&gt;-&lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #006600;&quot;&gt;fields&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$key&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;]&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&#039;aggregate&#039;&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;]&lt;/span&gt; = &lt;span style=&quot;color: #000000; font-weight: bold;&quot;&gt;TRUE&lt;/span&gt;;&lt;br /&gt;
      &lt;span style=&quot;color: #66cc66;&quot;&gt;}&lt;/span&gt;&lt;br /&gt;
      &lt;span style=&quot;color: #0000ff;&quot;&gt;$query&lt;/span&gt;-&lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #006600;&quot;&gt;add_groupby&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&#039;users_uid&#039;&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt;;&lt;br /&gt;
      &lt;span style=&quot;color: #b1b100;&quot;&gt;break&lt;/span&gt;;&lt;br /&gt;
  &lt;span style=&quot;color: #66cc66;&quot;&gt;}&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Turns out this works!  Jumping back to our view we see the query we are after:&lt;/p&gt;
&lt;div class=&quot;geshifilter&quot;&gt;&lt;div class=&quot;sql geshifilter-sql&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;SELECT&lt;/span&gt; node&lt;span style=&quot;color: #66cc66;&quot;&gt;.&lt;/span&gt;nid &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;AS&lt;/span&gt; nid&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; &lt;br /&gt;
       node&lt;span style=&quot;color: #66cc66;&quot;&gt;.&lt;/span&gt;title &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;AS&lt;/span&gt; node_title&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; &lt;br /&gt;
       users&lt;span style=&quot;color: #66cc66;&quot;&gt;.&lt;/span&gt;uid &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;AS&lt;/span&gt; users_uid &lt;br /&gt;&lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;FROM&lt;/span&gt; node node  &lt;br /&gt;&lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;INNER&lt;/span&gt; &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;JOIN&lt;/span&gt; users users &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;ON&lt;/span&gt; node&lt;span style=&quot;color: #66cc66;&quot;&gt;.&lt;/span&gt;uid &lt;span style=&quot;color: #66cc66;&quot;&gt;=&lt;/span&gt; users&lt;span style=&quot;color: #66cc66;&quot;&gt;.&lt;/span&gt;uid&lt;br /&gt;&lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;GROUP&lt;/span&gt; &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;BY&lt;/span&gt; users_uid&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If it looks like a hack, and quacks like a hack, then it&#039;s probably a... well ya know.  However, I don&#039;t have big qualms with implementing this.  Views behavior is in place to accommodate a database that, in this instance, is not being used.  Further, I am already using a hook function to modify a view beyond what that view is capable of spitting out on its own.  Lastly, I am able to accomplish this without modifying Views core.  All of that adds up to a valid use case and helps me to sleep at night.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description>
 <pubDate>Mon, 12 Mar 2012 15:09:21 +0000</pubDate>
 <dc:creator>rho</dc:creator>
 <guid isPermaLink="false">159 at http://theoleschool.com</guid>
</item>
<item>
 <title>Viewing Users Who Have Not Submitted a Webform</title>
 <link>http://theoleschool.com/blog/viewing-users-who-have-not-submitted-webform</link>
 <description>&lt;div class=&quot;field field-name-body field-type-text-with-summary field-label-hidden&quot;&gt;&lt;div class=&quot;field-items&quot;&gt;&lt;div class=&quot;field-item even&quot; property=&quot;content:encoded&quot;&gt;&lt;p&gt;On a recent Drupal 6 site, I received a request to build a view displaying a list of users who had not submitted a specific webform.  &lt;a href=&quot;http://drupal.org/project/webform&amp;quot;&quot;&gt;Webform&lt;/a&gt; of course, has some very nice reporting as well as decent views integration for submissions.  However, to view users that have yet to make a submission takes some creative views argument handling.&lt;/p&gt;
&lt;p&gt;I began by building a basic user view.  I then set the style and fields to my liking, and filtered on the specific role I was looking for.  So now we have views pulling a list of users that we wish to check against.  To find out who has not submitted the webform, we first have to take a look at who has.&lt;/p&gt; 
&lt;div class=&quot;geshifilter&quot;&gt;&lt;div class=&quot;drupal6 geshifilter-drupal6&quot; style=&quot;font-family:monospace;&quot;&gt;webform_get_submissions&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$filters&lt;/span&gt; = &lt;a href=&quot;http://www.php.net/array&quot;&gt;&lt;span style=&quot;color: #000066;&quot;&gt;array&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt;, &lt;span style=&quot;color: #0000ff;&quot;&gt;$header&lt;/span&gt; = &lt;span style=&quot;color: #000000; font-weight: bold;&quot;&gt;NULL&lt;/span&gt;, &lt;span style=&quot;color: #0000ff;&quot;&gt;$pager_count&lt;/span&gt; = &lt;span style=&quot;color: #cc66cc;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt;;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Webform has the above function in the &lt;span class=&quot;geshifilter&quot;&gt;&lt;code class=&quot;php geshifilter-php&quot;&gt;webform&lt;span style=&quot;color: #339933;&quot;&gt;.&lt;/span&gt;submission&lt;span style=&quot;color: #339933;&quot;&gt;.&lt;/span&gt;inc&lt;/code&gt;&lt;/span&gt; file that does just this.  You can pass a node id to &lt;span class=&quot;geshifilter&quot;&gt;&lt;code class=&quot;php geshifilter-php&quot;&gt;&lt;span style=&quot;color: #000088;&quot;&gt;$filters&lt;/span&gt;&lt;/code&gt;&lt;/span&gt; and the function will return a nice array of submission objects, detailing who has submitted the form.  We can then add an argument of type &lt;em&gt;&quot;User: UID&quot;&lt;/em&gt; to our view, select &lt;em&gt;&quot;Provide default argument&quot;&lt;/em&gt; below &quot;Action to take if argument is not present,&quot; and select &lt;em&gt;&quot;PHP Code&quot;&lt;/em&gt; under &quot;Default argument type.&quot;  Here we can provide a code snippet to return a list of User ids of users that have submitted the form.
&lt;/p&gt;&lt;div class=&quot;geshifilter&quot;&gt;&lt;div class=&quot;drupal6 geshifilter-drupal6&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;a href=&quot;http://api.drupal.org/api/function/module_load_include/6&quot;&gt;&lt;span style=&quot;color: #000066;&quot;&gt;module_load_include&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&#039;inc&#039;&lt;/span&gt;, &lt;span style=&quot;color: #ff0000;&quot;&gt;&#039;webform&#039;&lt;/span&gt;, &lt;span style=&quot;color: #ff0000;&quot;&gt;&#039;includes/webform.submissions&#039;&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt;;&lt;br /&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$submission_array&lt;/span&gt; = webform_get_submissions&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;/*node id of webform we are checking for*/&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt;;&lt;br /&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$uids&lt;/span&gt; = &lt;a href=&quot;http://www.php.net/array&quot;&gt;&lt;span style=&quot;color: #000066;&quot;&gt;array&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt;;&lt;br /&gt;&lt;span style=&quot;color: #b1b100;&quot;&gt;foreach&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;$submission_array&lt;/span&gt; &lt;span style=&quot;color: #b1b100;&quot;&gt;as&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;$submission&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt; &lt;span style=&quot;color: #66cc66;&quot;&gt;{&lt;/span&gt;&lt;br /&gt;
  &lt;span style=&quot;color: #0000ff;&quot;&gt;$uids&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;]&lt;/span&gt; = &lt;span style=&quot;color: #0000ff;&quot;&gt;$submission&lt;/span&gt;-&lt;span style=&quot;color: #66cc66;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #006600;&quot;&gt;uid&lt;/span&gt;;&lt;br /&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;}&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #b1b100;&quot;&gt;return&lt;/span&gt; &lt;a href=&quot;http://www.php.net/implode&quot;&gt;&lt;span style=&quot;color: #000066;&quot;&gt;implode&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&#039;,&#039;&lt;/span&gt;, &lt;span style=&quot;color: #0000ff;&quot;&gt;$uids&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt;;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This will gives us a comma separated string of user ids.  The default &quot;Validator options&quot; are fine but &lt;strong&gt;be sure&lt;/strong&gt; to check &lt;em&gt;&quot;Allow multiple terms per argument&quot;&lt;/em&gt; and &lt;em&gt;&quot;Exclude the argument.&quot;&lt;/em&gt;  After updating, your view now filters down to users that have not submitted the webform! To double check that this is happening, you can look at the query below the preview.  Near the end of the query in the &lt;span class=&quot;geshifilter&quot;&gt;&lt;code class=&quot;sql geshifilter-sql&quot;&gt;&lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;WHERE&lt;/span&gt;&lt;/code&gt;&lt;/span&gt; clause, you should see something like &lt;span class=&quot;geshifilter&quot;&gt;&lt;code class=&quot;sql geshifilter-sql&quot;&gt;users&lt;span style=&quot;color: #66cc66;&quot;&gt;.&lt;/span&gt;uid &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;NOT&lt;/span&gt; &lt;span style=&quot;color: #993333; font-weight: bold;&quot;&gt;IN&lt;/span&gt; &lt;span style=&quot;color: #66cc66;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #cc66cc;&quot;&gt;110&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; &lt;span style=&quot;color: #cc66cc;&quot;&gt;13028&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; &lt;span style=&quot;color: #cc66cc;&quot;&gt;210&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; &lt;span style=&quot;color: #cc66cc;&quot;&gt;107&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; &lt;span style=&quot;color: #cc66cc;&quot;&gt;35329&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; &lt;span style=&quot;color: #cc66cc;&quot;&gt;35330&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;,&lt;/span&gt; &lt;span style=&quot;color: #cc66cc;&quot;&gt;35331&lt;/span&gt;&lt;span style=&quot;color: #66cc66;&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/span&gt;. The list of numbers are the user ids that are being filtered.  If no one has submitted the form, then this of course will be empty.&lt;/p&gt;
&lt;p&gt;Now I admit, this is kinda gross. I shudder any time I include php in configuration. It is, however, a very straight forward way to get the results requested while staying in views, therefore leaving the output in the hands of a site builder/administrator.  There may be some clever ways to achieve the same thing using something like &lt;a href=&quot;http://drupal.org/project/webform_report&quot;&gt;Webform Report&lt;/a&gt;, or even a different views configuration, but nothing jumped out at me.  However, if you have solved this in a different way I would love to hear about it.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description>
 <pubDate>Sun, 04 Mar 2012 18:25:05 +0000</pubDate>
 <dc:creator>rho</dc:creator>
 <guid isPermaLink="false">158 at http://theoleschool.com</guid>
</item>
</channel>
</rss>
